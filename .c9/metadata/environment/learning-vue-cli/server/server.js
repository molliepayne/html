{"filter":false,"title":"server.js","tooltip":"/learning-vue-cli/server/server.js","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":0,"column":0},"end":{"row":73,"column":24},"action":"insert","lines":["const express = require('express');","const bodyParser = require(\"body-parser\");","","const app = express();","app.use(bodyParser.json());","app.use(bodyParser.urlencoded({","  extended: false","}));","","const mongoose = require('mongoose');","","// connect to the database","mongoose.connect('mongodb://localhost:27017/tickets', {","  useNewUrlParser: true","});","","const tickets = require(\"./tickets.js\");","app.use(\"/api/tickets\", tickets);","","app.listen(3000, () => console.log('Server listening on port 3000!'));","Then, create a file in server/tickets.js containing:x","","const mongoose = require('mongoose');","const express = require(\"express\");","const router = express.Router();","","//","// Tickets","//","","const ticketSchema = new mongoose.Schema({","  name: String,","  problem: String,","});","","const Ticket = mongoose.model('Ticket', ticketSchema);","","router.get('/', async (req, res) => {","  try {","    let tickets = await Ticket.find();","    return res.send(tickets);","  } catch (error) {","    console.log(error);","    return res.sendStatus(500);","  }","});","","router.post('/', async (req, res) => {","  const ticket = new Ticket({","    name: req.body.name,","    problem: req.body.problem","  });","  try {","    await ticket.save();","    return res.send(ticket);","  } catch (error) {","    console.log(error);","    return res.sendStatus(500);","  }","});","","router.delete('/:id', async (req, res) => {","  try {","    await Ticket.deleteOne({","      _id: req.params.id","    });","    return res.sendStatus(200);","  } catch (error) {","    console.log(error);","    return res.sendStatus(500);","  }","});","","module.exports = router;"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":73,"column":24},"action":"remove","lines":["const express = require('express');","const bodyParser = require(\"body-parser\");","","const app = express();","app.use(bodyParser.json());","app.use(bodyParser.urlencoded({","  extended: false","}));","","const mongoose = require('mongoose');","","// connect to the database","mongoose.connect('mongodb://localhost:27017/tickets', {","  useNewUrlParser: true","});","","const tickets = require(\"./tickets.js\");","app.use(\"/api/tickets\", tickets);","","app.listen(3000, () => console.log('Server listening on port 3000!'));","Then, create a file in server/tickets.js containing:x","","const mongoose = require('mongoose');","const express = require(\"express\");","const router = express.Router();","","//","// Tickets","//","","const ticketSchema = new mongoose.Schema({","  name: String,","  problem: String,","});","","const Ticket = mongoose.model('Ticket', ticketSchema);","","router.get('/', async (req, res) => {","  try {","    let tickets = await Ticket.find();","    return res.send(tickets);","  } catch (error) {","    console.log(error);","    return res.sendStatus(500);","  }","});","","router.post('/', async (req, res) => {","  const ticket = new Ticket({","    name: req.body.name,","    problem: req.body.problem","  });","  try {","    await ticket.save();","    return res.send(ticket);","  } catch (error) {","    console.log(error);","    return res.sendStatus(500);","  }","});","","router.delete('/:id', async (req, res) => {","  try {","    await Ticket.deleteOne({","      _id: req.params.id","    });","    return res.sendStatus(200);","  } catch (error) {","    console.log(error);","    return res.sendStatus(500);","  }","});","","module.exports = router;"],"id":2},{"start":{"row":0,"column":0},"end":{"row":19,"column":70},"action":"insert","lines":["const express = require('express');","const bodyParser = require(\"body-parser\");","","const app = express();","app.use(bodyParser.json());","app.use(bodyParser.urlencoded({","  extended: false","}));","","const mongoose = require('mongoose');","","// connect to the database","mongoose.connect('mongodb://localhost:27017/tickets', {","  useNewUrlParser: true","});","","const tickets = require(\"./tickets.js\");","app.use(\"/api/tickets\", tickets);","","app.listen(3000, () => console.log('Server listening on port 3000!'));"]}],[{"start":{"row":19,"column":11},"end":{"row":19,"column":15},"action":"remove","lines":["3000"],"id":3},{"start":{"row":19,"column":11},"end":{"row":19,"column":12},"action":"insert","lines":["8"]},{"start":{"row":19,"column":12},"end":{"row":19,"column":13},"action":"insert","lines":["0"]},{"start":{"row":19,"column":13},"end":{"row":19,"column":14},"action":"insert","lines":["8"]},{"start":{"row":19,"column":14},"end":{"row":19,"column":15},"action":"insert","lines":["1"]}],[{"start":{"row":19,"column":61},"end":{"row":19,"column":65},"action":"remove","lines":["3000"],"id":4},{"start":{"row":19,"column":61},"end":{"row":19,"column":62},"action":"insert","lines":["8"]},{"start":{"row":19,"column":62},"end":{"row":19,"column":63},"action":"insert","lines":["0"]},{"start":{"row":19,"column":63},"end":{"row":19,"column":64},"action":"insert","lines":["8"]},{"start":{"row":19,"column":64},"end":{"row":19,"column":65},"action":"insert","lines":["1"]}],[{"start":{"row":19,"column":61},"end":{"row":19,"column":65},"action":"remove","lines":["8081"],"id":5},{"start":{"row":19,"column":61},"end":{"row":19,"column":62},"action":"insert","lines":["3"]},{"start":{"row":19,"column":62},"end":{"row":19,"column":63},"action":"insert","lines":["0"]},{"start":{"row":19,"column":63},"end":{"row":19,"column":64},"action":"insert","lines":["0"]},{"start":{"row":19,"column":64},"end":{"row":19,"column":65},"action":"insert","lines":["0"]}],[{"start":{"row":19,"column":11},"end":{"row":19,"column":15},"action":"remove","lines":["8081"],"id":6},{"start":{"row":19,"column":11},"end":{"row":19,"column":12},"action":"insert","lines":["3"]},{"start":{"row":19,"column":12},"end":{"row":19,"column":13},"action":"insert","lines":["0"]},{"start":{"row":19,"column":13},"end":{"row":19,"column":14},"action":"insert","lines":["0"]},{"start":{"row":19,"column":14},"end":{"row":19,"column":15},"action":"insert","lines":["0"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":19,"column":15},"end":{"row":19,"column":15},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1575511241890,"hash":"5dc2c0eaa43ce0deebb08f18a2a7dfd46bf0560a"}